# 2026-02-12

# Quiz

1. *When do we use the async/await pattern (that your instructor hasn't even explained yet) in our C# code?*
    - To perform non-blocking operations, Whenever you make an endpoint that reaches out to another resource(service,database, etc)
    - Async on function header, await on resource call
        - Async methods in .NET always return a `Type` of soemthing, it is a wrapper, Sometimes you see a `ValueTask`
1.1 *What is "reflection" is a programming language?*
    - The ability of code to look at itself. A kind of "introspection"
    - Swashbuckle = a tool that can look at your code & generate the "starter" openapi (swagger document)
        - We'll include this, & there's an endpoint
    - NSwag - Same kind of deal
    - OpenApi - IT IS AWESOME NOW. .NET 10 this is fantastic
2. *What is Open API?*
    - Standard language format for DOCUMENTING RESTful APIs in JSON (and YAML)
    - What is Scalar? (The thing we added to AppHost)
        - Wrapper for Open API (updated version of swagger) that makes the json look nice and provides endpoint testing
        - A tool that can take an OpenApi document & present a UI so you can test out and explore the API
            - Just openapi document, useful for development but not for production
3. *Why did we use an Http DELETE method in our `student/moments` endpoint when we really didn't "delete" anything?*
    - One of the four HTTP request types and DELETE fit the best
    - Mark MM that have been answered, removing it from the returned table, modifying it
4. Consider the following code we created yesterday:

```csharp
 public static async Task<IResult> MarkQuestionAnswered(Guid id, IDocumentSession session)
    {
        // ...
    }
```

- *How is our API being made "aware" that this is the code it should run when receiving an Http DELETE request to `student/moments/b0f17531-ca09-41dd-8654-d0eb180f6797` (for example)?*
    - Controllers: Using annotations
    - Not Controllers: Using MapDelete in ApiExtensions - still has to be called from Program.cs
- *Where are the `id` and `session` variables coming from when this method is executed?*
    - (The request, each request is a different session)?
    - What is calling this code? How is it getting executed?
        - The API Framework - the tuntime - will call this code AND provide the things we ask for that are paramters to this

- *If the API received a request of `DELETE /student/moments/bird-cage` what would the value of `id` be when this code is executed (uhm, might be a trick question), but explain your answer.*
    - ID gets defaulted to 0000...  NULL, if we didn't add the route constraint (e.g. `{id:guid}`)
- The database provider we are using here calls it a "session", sometimes it's called a "context", and ASP.NET MVC (our platform for building APIs) calls it
    a "scope". But they all mean basically the same thing in this context, which is:
    - Transaction, Lifespan of a request, it either does all the things or none of them.

# Kent Beck's Four Rules of Simple design
*1. Passes the Tests - Works*
    - "Start with the end in mind" - What am i trying to accomplush here
    - Write a test that proves the system does not currently have that behavior
    - But that test can't be too big, not too complex
    - The Guardrail: Set a time limit on getting the test to pass
        - Reset if you hit time limit
        - Can be ugly, nasty code if you have to
*2. Expresses Intent - understandable*
    - Write tests that tests the concepts / end results, NOT how you implemented the solution
*3. No Duplication - You've identified concepts*
*4. Fewest Elements - Less is better*

"This is where I pput most of my comments, it's in my tests"

# Coupling and Cohesion
- Coupling is "The strength of realtionships between code modules"
    - How easy is it to change one thing without needing to change/break something else
    - Inappropiate intamacy (You shouldn't know I'm storing my db in Postgres)
    - We want low coupling
- Cohesion: "How well things go together"
    - "Junk Pile" - "Incidental Cohesion" - A "Utils" or "Helpers" Folder
    - "Temporal" - Have the stuff close at hand to where it is needed and when it is needed
    - "Functional" - 
    - "Is it the right thingy? Abstraction" 

    Ctrl+RR is how to change a name in one file


